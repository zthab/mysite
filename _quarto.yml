project:
  type: website

website:
  title: "Zahra Thabet"
  description: "Zahra Thabet's personal website"
  twitter-card: true
  search: false

  navbar:
    background: "#f9f6f0"
    left:
      - href: index.qmd
        text: Home
      - about.qmd
      - resources.qmd
      - text: CV
        file: zahra_thabet_cv.pdf

format:
  html:
    theme: default
    css: styles.css
    mainfont: "EB Garamond"
    monofont: "JetBrains Mono"
    include-in-header:
      - text: |
          <link rel="preconnect" href="https://fonts.googleapis.com">
          <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
          <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
          <script>
            (function() {
              const saved = localStorage.getItem('theme');
              if (saved) {
                document.documentElement.setAttribute('data-theme', saved);
              }
            })();
          </script>
    include-after-body:
      - text: |
          <script>
            (function() {
              const toggle = document.createElement('button');
              toggle.className = 'theme-toggle';
              toggle.setAttribute('aria-label', 'Toggle dark mode');

              function updateIcon() {
                const isDark = document.documentElement.getAttribute('data-theme') === 'dark' ||
                  (!document.documentElement.getAttribute('data-theme') &&
                   window.matchMedia('(prefers-color-scheme: dark)').matches &&
                   document.documentElement.getAttribute('data-theme') !== 'light');
                toggle.textContent = isDark ? '☀' : '☽';
              }

              toggle.addEventListener('click', function() {
                const current = document.documentElement.getAttribute('data-theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                let newTheme;

                if (current === 'dark' || (!current && prefersDark)) {
                  newTheme = 'light';
                } else {
                  newTheme = 'dark';
                }

                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateIcon();
              });

              updateIcon();

              const nav = document.querySelector('.navbar-nav');
              if (nav) {
                const li = document.createElement('li');
                li.className = 'nav-item';
                li.appendChild(toggle);
                nav.appendChild(li);
              }
            })();
          </script>
